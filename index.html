<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Открытие Telegram чата 100%</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      background: #000;
      color: #f00;
      font-family: monospace;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      user-select: none;
      margin: 0;
      text-align: center;
    }
    button {
      font-size: 20px;
      padding: 15px 30px;
      background: #cc0000;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      user-select: none;
      box-shadow: 0 0 8px #cc0000;
      transition: background 0.3s ease;
    }
    button:hover:not(:disabled) {
      background: #ff1a1a;
      box-shadow: 0 0 15px #ff1a1a;
    }
    button:disabled {
      background: #440000;
      cursor: wait;
      box-shadow: none;
    }
    #message {
      margin-top: 20px;
      font-size: 18px;
      color: #aaa;
    }
  </style>
</head>
<body>

  <button id="openTelegram">Связаться</button>
  <div id="message"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <script>
    // Зашифрованная tg:// ссылка (пример для tg://resolve?domain=OxdSJtTTiGc0OTcx)
    const encrypted = "p4QGpWAmUgYFqGr9xqTfqKcHvN7aNfJh1z4oV25NLck=";
    
    // AES ключ и IV должны совпадать с тем, которым шифровалась ссылка
    const keyStr = "MySecretKey12345";
    const ivStr = "MySecretIV123456";

    // WebWorker код для расшифровки
    const workerCode = `
      importScripts('https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js');
      onmessage = function(e) {
        const key = CryptoJS.enc.Utf8.parse("${keyStr}");
        const iv = CryptoJS.enc.Utf8.parse("${ivStr}");
        const decrypted = CryptoJS.AES.decrypt(e.data, key, {
          iv: iv,
          mode: CryptoJS.mode.CBC,
          padding: CryptoJS.pad.Pkcs7
        }).toString(CryptoJS.enc.Utf8);
        postMessage(decrypted);
      }
    `;
    
    const blob = new Blob([workerCode], {type: "application/javascript"});
    const workerUrl = URL.createObjectURL(blob);
    const worker = new Worker(workerUrl);

    const button = document.getElementById('openTelegram');
    const message = document.getElementById('message');

    button.onclick = () => {
      button.disabled = true;
      message.textContent = "Открываем Telegram...";
      worker.postMessage(encrypted);
    };

    worker.onmessage = (e) => {
      const tgUrl = e.data;

      // Прямой переход на tg://
      window.location.href = tgUrl;

      // На всякий случай показать сообщение (если браузер блокирует)
      message.textContent = "Если Telegram не открылся автоматически, нажмите кнопку ниже.";
      
      // Добавляем кнопку для ручного перехода
      const manualBtn = document.createElement('button');
      manualBtn.textContent = "Открыть Telegram вручную";
      manualBtn.style.marginTop = '20px';
      manualBtn.onclick = () => window.location.href = tgUrl;
      message.appendChild(manualBtn);

      // Завершаем воркер и очищаем URL blob
      worker.terminate();
      URL.revokeObjectURL(workerUrl);
    };

    // Защита DevTools и копирования
    document.addEventListener("keydown", (e) => {
      if (
        e.key === "F12" ||
        (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "i") ||
        (e.ctrlKey && e.key.toLowerCase() === "u")
      ) {
        e.preventDefault();
        alert("Доступ запрещён");
      }
    });
    document.body.oncontextmenu = e => e.preventDefault();
    document.body.oncopy = e => e.preventDefault();
    document.body.oncut = e => e.preventDefault();
  </script>

</body>
</html>
